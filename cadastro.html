<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/cabeçalho-rodape.css"
    <link rel="stylesheet" href="css/cadastro.css">
    <script src="script/menu.js"></script>
</head>
<body>
    <header>
        <a id="topimg" href="index.html" aria-label="logo"><img src="img/logomuvall.png"alt="Logo da empresa MUVALL" rel="prev"></a>

        <nav>
            <div id="menu-container">

                <div></div>
                <div></div>
                <div></div>


                <ul id="menu-items">
                    <li><a href="perfil.html" aria-label="Perfil" rel="next">Minha conta</li>
                    <li><a href="login.html" aria-label="Login" rel="next">Login</a></li>
                    <li><a href="#" aria-label="Fale conosco" rel="next">Fale Conosco</a></li>
                </ul>
            </div>
        </nav>
    </header>
    <main>
        <form action="cadastro" method="post"  onsubmit="validarFormulario()">
            <h2>Cadastro</h2><hr>
            <input type="email" name="email" placeholder="E-Mail" id="email" required maxlength="100">
            <input type="text" name="nome" placeholder="Nome Completo" id="nome" required maxlength="100" minlength="3">
            <input type="password" name="senha" placeholder="Senha" id="senha" required maxlength="30" minlength="8">
            <input type="text" name="cpf" placeholder="CPF" id="cpf" required oninput="this.value = formatCPF(this.value)">
            <button type="submit" id="cadastrar-bttn">Cadastrar</button>
        </form>
    </main>
    <footer>
        <img src="img/logomuvall.png" alt="Logo MUVall">
        <a href="">Fale conosco</a>
        <div id="cadastro-rodape">
            <h2>Cadastro</h2>
            <ul>
                <li><a href="cadastro.html" rel="next">Usuário</a></li>
                <li><a href="cadastro-anunciante.html" rel="next">Anunciante</a></li>
            </ul>
        </div>
        <div id="redesSociais">
            <h2>Redes sociais</h2>
            <a href="https://instagram.com"><img src="img/instagram.png" alt="Logo Instagram" target="_blank" rel="external"></a>
            <a href="https://instagram.com"><img src="img/linkedin.png" alt="Logo Facebook" target="_blank" rel="external"></a>
        </div>
    </footer>
    <script src="script/menu.js"></script>
</body>
<script>
    function formatCPF(cpf) {
        cpf = cpf.replace(/\D/g, '');
        cpf = cpf.substring(0, 11); 

        if (!/^\d+$/.test(cpf)) { 
            return ''; 
        }

        cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2'); 
        cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2'); 
        cpf = cpf.replace(/(\d{3})(\d{1,2})$/, '$1-$2'); 

        return cpf;
    }
    function validarCPF(cpf) {
    cpf = cpf.replace(/[^\d]+/g, ''); // Remove tudo que não é número
    if (cpf.length !== 11 || !/^\d{11}$/.test(cpf)) {
        return false;
    }
    // Calcula o primeiro dígito verificador
    let soma = 0;
    for (let i = 0; i < 9; i++) {
        soma += parseInt(cpf.charAt(i)) * (10 - i);
    }
    let resto = 11 - (soma % 11);
    let digitoVerificador1 = resto === 10 || resto === 11 ? 0 : resto;
    if (digitoVerificador1 !== parseInt(cpf.charAt(9))) {
        return false;
    }
    // Calcula o segundo dígito verificador
    soma = 0;
    for (let i = 0; i < 10; i++) {
        soma += parseInt(cpf.charAt(i)) * (11 - i);
    }
    resto = 11 - (soma % 11);
    let digitoVerificador2 = resto === 10 || resto === 11 ? 0 : resto;
    if (digitoVerificador2 !== parseInt(cpf.charAt(10))) {
        return false;
    }
    return true;
    }
</script>

<script>
    function validarEmail() {
  const email = document.getElementById('email').value;
  const regex = /\S+@\S+\.\S+/;
  if (!email || !regex.test(email)) {
    alert('Por favor, digite um e-mail válido.');
    return false;
  }
  return true;
}
</script>
<script>
    // Verifica se o campo de nome está vazio
    function validarNome() {
    const nome = document.getElementById('nome').value;
    if (!nome) {
        alert('Por favor, digite seu nome completo.');
    return false;
  }
  return true;
}
</script>

<script>
    const senhaInput = document.getElementById('senha');
  
    function validarSenha() {
      const senha = senhaInput.value;
      if (!senha) {
        alert('Por favor, digite uma senha.');
        return false;
      }
      if (/^[a-zA-Z]+$/.test(senha)) {
        alert('Sua senha deve conter pelo menos um caractere que não seja uma letra.');
        return false;
      }
      return true;
    }
  
    senhaInput.addEventListener('input', function() {
      if (this.value.length > 20) {
        this.value = this.value.slice(0, 20); // limita a 20 caracteres
      }
    });
  
    senhaInput.maxLength = 20;
  </script>

<script>
    function validarFormulario() {
    if (validarEmail() && validarNome() && validarSenha()) {
        document.getElementById('meu-formulario').submit();
    }
}
</script>

</html>

